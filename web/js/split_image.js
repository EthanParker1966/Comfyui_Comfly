import{app}from"../../../scripts/app.js";import{$el}from"../../../scripts/ui.js";import{createImageHost}from"../../../scripts/ui/imagePreview.js";app.registerExtension({name:"split_image",async beforeRegisterNodeDef(t,e,o){if("Comfly_split_image"===e.name){t.prototype.outputType="output";const e=t.prototype.onNodeCreated;t.prototype.onNodeCreated=function(){const t=e?.apply(this,arguments),o=createImageHost(this);return this.addCustomWidget(o.el),this.onExecuted=async()=>{const t=await this.invokeMethod("get_image_paths"),e=await Promise.all(t.map((async t=>{const e=await fetch(`http://localhost:8080/view?filename=${encodeURIComponent(t)}`),o=await e.blob();return $el("img",{src:URL.createObjectURL(o),style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}})})));o.updateImages(e),this.setSize([500,500])},t}}}});